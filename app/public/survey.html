<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Friend Finder Survey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <h2>survey quests</h2>
        <hr>
        <h3><strong>About you</strong></h3>
        <h4>name (requires)</h4>
        <input type="text" id='name' class='form-control' required>
        <h4>Link to photo (required)</h4>
        <input type="text" id='photo' class='form-control' required>
        <hr>
        <h3><strong>quest 1</strong></h3>
        <h4>Seeds are the aweseme.</h4>
        <select id="q1" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 2</strong></h3>
        <h4>I am more interested in bushes.</h4>
        <select id="q2" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 3</strong></h3>
        <h4>At heart I am a botanast.</h4>
        <select id="q3" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 4</strong></h3>
        <h4>Lizards are really cool.</h4>
        <select id="q4" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 5</strong></h3>
        <h4> I would not mind spitting fire.</h4>
        <select id="q5" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 6</strong></h3>
        <h4> The desert, no sweat! Let's chill out.</h4>
        <select id="q6" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 7</strong></h3>
        <h4> turtles! </h4>
        <select id="q7" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 8</strong></h3>
        <h4> Spending time next to the ocean is where I want to be. </h4>
        <select id="q8" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 9</strong></h3>
        <h4> I could be a marine. </h4>
        <select id="q9" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <h3><strong>quest 10</strong></h3>
        <h4>Pika me!</h4>
        <select id="q10" class="chosen-select">
            <option value=""></option>
            <option value="1">1 (strongly disagree)</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5 (strongly agree)</option>
        </select>
        <br>
        <br>
        <button type='submit' class='btn btn-primary btn-lg btn-block' id='submity'>submit</button>
        <hr>
        <br>
        <footer class="foot">
            <div class="container">
                <p><a href="/api/friends">api pokemon list</a> | <a href="https://github.com/FlintSable/FriendFinder">github repo</a></p>
            </div>
        </footer>
        <!-- match modal -->
    </div>
    <div id='poke-modal' class='modal fade' role='dialog'>
        <div class='modal-dialog'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <button type='button' class='close' data-dismiss='modal'>o</button>
                    <h2 class='modal-title'><strong>The pokemon for you is</strong></h2>
                </div>
                <div class='modal-body' style='text-align:center'>
                    <h2 id='poke-name'></h2>
                    <img id='poke-img' src="http://cdn.bulbagarden.net/upload/archive/3/36/20140703020618%21132Ditto.png" height='300' alt=''>
                </div>
                <div class='modal-footer'>
                    <button type='button' class='btn btn-default' data-dismiss='modal'>x</button>
                </div>
            </div>
        </div>
    </div>
    <!-- data val modal -->
    </div>
    <div id='retry' class='modal fade' role='dialog'>
        <div class='modal-dialog'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <button type='button' class='close' data-dismiss='modal'>o</button>
                    <h2 class='modal-title'><strong>There seems to be some missing data</strong></h2>
                </div>
                <div class='modal-body' style='text-align:center'>
                    <h2 id='retry-bold'>data missing</h2>
                </div>
                <div class='modal-footer'>
                    <button type='button' class='btn btn-default' data-dismiss='modal'>x</button>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script type='text/javascript'>
    $(document).ready(function() {
        $('#poke-modal').hide();
        $('#retry').hide();




        $('#submity').on('click', function(event) {
            event.preventDefault();



            if ($('#name').val() === '' || $('#photo').val() === '') {
                $('#retry').modal('show');

            } else {
                var newUser = {
                    name: $('#name').val(),
                    photo: $('#photo').val(),
                    scores: [
                        $('#q1').val(),
                        $('#q2').val(),
                        $('#q3').val(),
                        $('#q4').val(),
                        $('#q5').val(),
                        $('#q6').val(),
                        $('#q7').val(),
                        $('#q8').val(),
                        $('#q9').val(),
                        $('#q10').val()
                    ]
                };
                event.preventDefault();
                var curUrl = window.location.origin;

                $.post(curUrl + '/api/friends', newUser, function(data) {
                    console.log(data);
                    $('#poke-name').text(data.name);
                    $('#poke-img').attr('src', data.photo);
                    $('#poke-modal').modal('show');

                    $('#name').val('');
                    $('#photo').val('');
                    $('#q1').val('');
                    $('#q2').val('');
                    $('#q3').val('');
                    $('#q4').val('');
                    $('#q5').val('');
                    $('#q6').val('');
                    $('#q7').val('');
                    $('#q8').val('');
                    $('#q9').val('');
                    $('#q10').val('');
                });

            }
        });

    });
    </script>
</body>

</html>
